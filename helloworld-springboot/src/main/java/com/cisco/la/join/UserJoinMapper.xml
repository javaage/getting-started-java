<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cisco.la.join.UserJoinMapper">
  <resultMap id="UserResultMap" type="com.cisco.la.entity.UserJoin">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Jan 18 15:28:55 CST 2018.
    -->
    <id column="usr_id" jdbcType="VARCHAR" property="id" />
    <result column="usr_name" jdbcType="VARCHAR" property="name" />
    <result column="usr_budget" jdbcType="DOUBLE" property="budget" />
    <result column="usr_balance" jdbcType="DOUBLE" property="balance" />
    <result column="usr_bu" jdbcType="VARCHAR" property="bu" />
    <result column="usr_title" jdbcType="VARCHAR" property="title" />
    <result column="usr_grade" jdbcType="VARCHAR" property="grade" />
    <result column="usr_rl_id" jdbcType="INTEGER" property="roleID" />
    <result column="rl_name" jdbcType="VARCHAR" property="roleName" />
    <result column="usr_active" jdbcType="BIT" property="active" />
  </resultMap>
  <select id="getUserJoin" parameterType="string" resultMap="UserResultMap">
		SELECT u.usr_id, u.usr_name, u.usr_budget, u.usr_balance, u.usr_bu, u.usr_title, 
       u.usr_grade, u.usr_rl_id, u.usr_active, r.rl_name
	  FROM public.la_user u
	  LEFT JOIN public.la_role r
	  ON u.usr_rl_id = r.rl_id
	  ORDER BY u.usr_active desc
	</select>
	
	<select id="getUserByIDs" parameterType="string" resultMap="UserResultMap">
		SELECT u.usr_id, u.usr_name, u.usr_budget, u.usr_balance, u.usr_bu, u.usr_title, 
       u.usr_grade, u.usr_rl_id, u.usr_active, r.rl_name
	  FROM public.la_user u
	  LEFT JOIN public.la_role r
	  ON u.usr_rl_id = r.rl_id
	  where u.usr_active=true and position(u.usr_id in #{IDs}) > 0
	  ORDER BY u.usr_active desc
	</select>
</mapper>